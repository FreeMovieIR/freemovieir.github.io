<!DOCTYPE html>
<html lang="fa" class="dark">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>جستجوی هوشمند - فیری مووی</title>
    <script src="/js/tailwind-config.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/gh/rastikerdar/vazir-font@latest/dist/font-face.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        body {
            font-family: 'Vazir', sans-serif;
            direction: rtl;
        }

        .genre-btn {
            transition: all 0.3s ease;
        }

        .genre-btn.selected-include {
            background: linear-gradient(to right, #10b981, #14b8a6);
            color: white;
            border-color: transparent;
        }

        .genre-btn.selected-exclude {
            background: linear-gradient(to right, #ef4444, #f87171);
            color: white;
            border-color: transparent;
        }

        /* Custom Checkbox styles */
        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #ffc107;
            /* accent color */
            cursor: pointer;
            box-shadow: 0 0 10px rgba(255, 193, 7, 0.5);
        }
    </style>
</head>

<body
    class="bg-base-900 text-gray-100 min-h-screen flex flex-col font-sans selection:bg-accent selection:text-base-900">
    <!-- Header Placeholder -->
    <div id="shared-header"></div>

    <main class="container mx-auto flex-1 py-12 px-4">
        <h1
            class="text-4xl md:text-5xl font-extrabold text-center text-transparent bg-clip-text bg-gradient-to-r from-accent to-yellow-200 drop-shadow-sm mb-2">
            جستجوی هوشمند فیلم</h1>
        <p class="text-center text-gray-400 mb-10 max-w-2xl mx-auto">با انتخاب ژانرهای مورد علاقه و حذف ژانرهایی که دوست
            ندارید، دقیقاً همون فیلمی که می‌خواید رو پیدا کنید.</p>

        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
            <!-- Filter Sidebar -->
            <div
                class="lg:col-span-1 bg-base-900/80 backdrop-blur-xl p-6 rounded-2xl shadow-[0_0_30px_rgba(0,0,0,0.4)] border border-gray-700/50 sticky top-24 h-fit">

                <!-- Inclusion Section -->
                <div class="mb-8">
                    <h3 class="text-lg font-bold text-emerald-400 mb-3 flex items-center gap-2"><i
                            class="fas fa-check-circle"></i> ژانرهای مورد علاقه (حتماً باشه)</h3>
                    <div id="include-genres-container" class="flex flex-wrap gap-2">
                        <!-- Genres will be injected here -->
                    </div>
                </div>

                <!-- Exclusion Section -->
                <div class="mb-8">
                    <h3 class="text-lg font-bold text-red-400 mb-3 flex items-center gap-2"><i
                            class="fas fa-times-circle"></i> ژانرهای آزاردهنده (اصلاً نباشه)</h3>
                    <div id="exclude-genres-container" class="flex flex-wrap gap-2">
                        <!-- Genres will be injected here -->
                    </div>
                </div>

                <!-- Range Filters -->
                <div class="mb-6 bg-base-800/50 p-4 rounded-xl border border-gray-700/50">
                    <label class="block text-gray-300 font-bold mb-2 flex justify-between">حداقل امتیاز: <span
                            id="rating-val" class="text-accent font-bold">5.0</span></label>
                    <input type="range" id="min-rating" min="0" max="10" step="0.5" value="5"
                        class="w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer">
                </div>

                <div class="mb-8 bg-base-800/50 p-4 rounded-xl border border-gray-700/50">
                    <label class="block text-gray-300 font-bold mb-2">مرتب‌سازی بر اساس</label>
                    <select id="sort-by"
                        class="w-full bg-base-950 border border-gray-700 text-white text-sm rounded-lg focus:ring-accent focus:border-accent block p-2.5">
                        <option value="popularity.desc">محبوب‌ترین‌ها</option>
                        <option value="vote_average.desc">بیشترین امتیاز</option>
                        <option value="primary_release_date.desc">جدیدترین‌ها</option>
                    </select>
                </div>

                <button id="search-btn"
                    class="w-full bg-gradient-to-r from-accent to-yellow-500 text-base-900 font-bold text-lg py-3 rounded-xl hover:from-yellow-400 hover:to-yellow-300 shadow-[0_4px_15px_rgba(255,193,7,0.4)] transition-all duration-300 transform hover:scale-[1.02] flex items-center justify-center gap-2">
                    <i class="fas fa-search"></i> پیدا کن!
                </button>
            </div>

            <!-- Results Grid -->
            <div class="lg:col-span-2">
                <div id="results-loader" class="hidden flex-col items-center justify-center py-20">
                    <div class="inline-block relative w-16 h-16 mb-4">
                        <div class="absolute top-0 left-0 w-full h-full border-4 border-accent/20 rounded-full"></div>
                        <div
                            class="absolute top-0 left-0 w-full h-full border-4 border-accent rounded-full border-t-transparent animate-spin">
                        </div>
                    </div>
                    <p class="text-accent font-bold animate-pulse">در حال جستجو بین هزاران فیلم...</p>
                </div>

                <div id="results-container" class="grid grid-cols-2 md:grid-cols-3 xl:grid-cols-4 gap-6">
                    <!-- Movie Cards injected here -->
                    <div
                        class="col-span-full py-16 text-center text-gray-400 bg-base-800/30 rounded-2xl border border-dashed border-gray-700">
                        <i class="fas fa-film text-4xl mb-4 opacity-50"></i>
                        <p>ژانرهای مورد نظرتون رو انتخاب کنید و روی دکمه جستجو کلیک کنید.</p>
                    </div>
                </div>

                <!-- Pagination -->
                <div id="pagination" class="mt-10 flex justify-center gap-2 hidden">
                    <button id="prev-page"
                        class="px-4 py-2 bg-base-800 hover:bg-base-700 border border-gray-700 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed cursor-pointer"><i
                            class="fas fa-chevron-right"></i> قبلی</button>
                    <span id="page-info"
                        class="px-4 py-2 bg-base-900 border border-gray-700 rounded-lg text-accent font-bold text-center min-w-[100px]">1
                        از 1</span>
                    <button id="next-page"
                        class="px-4 py-2 bg-base-800 hover:bg-base-700 border border-gray-700 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed cursor-pointer">بعدی
                        <i class="fas fa-chevron-left"></i></button>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer Placeholder -->
    <div id="shared-footer"></div>

    <script src="../apiKeySwitcher.js"></script>
    <script src="/js/layout-shared.js" defer></script>
    <script src="finder.js" defer></script>
</body>

</html>